define(["jquery","loglevel","amplify-pubsub","jquery-treegrid-webpack","moment","fenix-ui-bridge"],function(t,e,i,r,n,a){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){var r,n;r=[i(3),i(4),i(29),i(6),i(5),i(30),i(2),i(33),i(27)],n=function(t,e,r,n,a,o,s,l,p){"use strict";function d(r){e.info("FENIX metadata viewer"),e.info(r),i(34),t.extend(!0,this,a,{initial:r}),this._parseInput();var n=this._validateInput();return n===!0?(this._initVariables(),this._bindEventListeners(),this._getMDSD().then(t.proxy(this._onGetMDSDSuccess,this),t.proxy(this._onGetMDSDError,this)),this):(e.error("Impossible to create Metadata Viewer"),void e.error(n))}return d.prototype.on=function(t,e){return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:this,callback:e}),this},d.prototype.dispose=function(){this.outputCreator.dispose(),this._unbindEventListeners(),e.info("Metadata viewer["+this.id+"] disposed"),this._trigger("dispose",this.model)},d.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),i=0,r=this.channels[t].length;i<r;i++){var n=this.channels[t][i];n.callback.apply(n.context,e)}return this},d.prototype._parseInput=function(){this.$el=t(this.initial.el),this.model=this.initial.model,this.lang=this.initial.lang||a.lang,this.lang=this.lang.toUpperCase(),this.cache=this.initial.cache||a.cache,this.environment=this.initial.environment||a.environment,this.bridgeConfig=this.initial.bridge||{},this.specialFields=this.initial.specialFields,this.config=t.extend(!0,{},a.config,this.initial.config),this.popover=t.extend(!0,{},a.popover,this.initial.popover),this.whiteList=this.initial.whiteList||a.whiteList,this.expandAttributesRecursively=this.initial.expandAttributesRecursively||a.expandAttributesRecursively,this.expandAttributes=this.initial.expandAttributes||a.expandAttributes,this.hideExportButton="boolean"==typeof this.initial.hideExportButton?this.initial.hideExportButton:a.hideExportButton,this.serviceProvider=this.initial.serviceProvider||void 0},d.prototype._validateInput=function(){var t=!0,i=[];return this.id||(window.fx_MetadataViewer_id>=0?window.fx_MetadataViewer_id++:window.fx_MetadataViewer_id=0,this.id=String(window.fx_MetadataViewer_id),e.info("Set auto id to: "+this.id)),0===this.$el.length&&(i.push({code:r.missingContainer}),e.warn("Impossible to find MetadataViewer container")),this.model||(i.push({code:r.missingModel}),e.warn("Impossible to find MetadataViewer model")),i.length>0?i:t},d.prototype._initVariables=function(){this.channels={},this.modelCreator=new o({data:this.model.hasOwnProperty("metadata")?this.model.metadata:this.model,lang:this.lang,specialFields:this.specialFields}),this.outputCreator=new s({el:this.$el,hideExportButton:this.hideExportButton,popover:this.popover,whiteList:this.whiteList,config:this.config,expandAttributesRecursively:this.expandAttributesRecursively,expandAttributes:this.expandAttributes}),this.bridge=new l(t.extend(!0,{environment:this.environment,cache:this.cache,serviceProvider:this.serviceProvider},this.bridgeConfig))},d.prototype._bindEventListeners=function(){p.subscribe(n.export,this,this._onExport)},d.prototype._getMDSD=function(){return this.bridge.getMDSD(this.bridgeConfig)},d.prototype._onGetMDSDError=function(t){e.error(r.getMDSDError),e.error(t)},d.prototype._onGetMDSDSuccess=function(t){e.info("MDSD loaded successfully",t),this.mdsd=t,this._render()},d.prototype._render=function(){e.info("Rendering..."),this._processModel(),this._renderOutput(),this._trigger("ready",this.model)},d.prototype._processModel=function(){e.info("Process Model"),this.outputModel=this.modelCreator.process(this.mdsd),e.info("this.outputModel",this.outputModel)},d.prototype._renderOutput=function(){e.info("Render output"),this.outputCreator.render(this.outputModel)},d.prototype._onExport=function(){this._trigger("export",this.model)},d.prototype._unbindEventListeners=function(){p.unsubscribe(n.export,this._onExport)},d}.apply(e,r),!(void 0!==n&&(t.exports=n))},function(t,e,i){var r,n;r=[i(3),i(4),i(5),i(6),i(7),i(27),i(28)],n=function(t,e,i,r,n,a,o){"use strict";function s(e){this.o=t.extend(!0,{},l,e),this.$el=t(this.o.el),this.$whitelist=this.o.whiteList,this.$treegridSettings=this.o.config,this.$popoverSettings=this.o.popover,this.hideExportButton=this.o.hideExportButton,this.expandAttributesRecursively=this.o.expandAttributesRecursively,this.expandAttributes=this.o.expandAttributes}var l={identifiers:{noParentId:"noParent",depth_level:"depth-level",parent_class:"treegrid-parent-",treegrid_class:"treegrid-",bean:{title:"title",desc:"description",bean_name:"bean"}},visualizationInfo:{container:".container"},s:{table_container:".fx-md-viewer-container",description_class:".fx-md-viewer-description",popover_class:".popover",treegrid_expander_arrow:"span.treegrid-expander",EXPORT:'[data-role="export"]'}};return s.prototype.render=function(t){this.$visualizationData=this._transformDataToVisualizationModel(t.model,"noParent",0),this.$dataForTreeGRid={title_resource:t.title,data:this.$visualizationData,hideExportButton:this.hideExportButton},this._getObjectKeys(this.$whitelist).length>0&&(this.$dataForTreeGRid.data=this._filterWhiteList());var e=n,i=e(this.$dataForTreeGRid);this.$el.empty(),this.$el.append(i);var r=this.$el.find(this.o.s.table_container).treegrid(this.$treegridSettings);r&&(this._bindEventListeners(),this._checkExpandNodesOptions())},s.prototype.dispose=function(){this._unbindListeners(),this.$el.empty()},s.prototype._transformDataToVisualizationModel=function(t,e,i){for(var r,n=[],a=0,o=t.length;a<o;a++)t[a].hasChildren&&t[a].hasChildren===!0?(r="noParent"!=e?"treegrid-"+t[a].bean+" treegrid-parent-"+e+" depth-level-"+i+" element fx-expand":"treegrid-"+t[a].bean+" "+e+" depth-level-"+i+" treegrid-collapsed element fx-expand",n.push({title:t[a].title,desc:t[a].description,bean:t[a].bean,parentBean:e,className:r}),n=n.concat(this._transformDataToVisualizationModel(t[a].value,t[a].bean,i+1))):t[a].hasChildren===!1&&(r="noParent"!=e?"treegrid-"+t[a].bean+" treegrid-parent-"+e+" depth-level-"+i+" element fx-expand":"treegrid-"+t[a].bean+" "+e+" depth-level-"+i+" element fx-expand",n.push({title:t[a].title,desc:t[a].description,bean:t[a].bean,value:t[a].value,parentBean:e,className:r}));return n},s.prototype._bindEventListeners=function(){var i=this;this.$el.find(i.o.s.description_class,i.$el).on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),i.$el.find(i.o.s.popover_class,i.$el)&&i.$el.find(i.o.s.popover_class,i.$el).popover("destroy"),i.$el.find(this,i.$el).popover(i.$popoverSettings),i.$el.find(this,i.$el).popover("show")}),this.$el.on("click",function(t){t.stopImmediatePropagation(),e.info("el - event"),event.target.hasAttribute("data-toggle")||i._destroyPopups(event,i)}),this.$el.find(this.o.s.table_container+" tr > td",i.$el).on("click",function(r){if(e.info(r.target),!r.target.hasAttribute("data-toggle")){r.stopImmediatePropagation();var n=t(this,i.$el).parents("tr").first();n.treegrid("toggle"),e.info("tc - event")}i._destroyPopups(r,i)}),this.$el.find(i.o.s.treegrid_expander_arrow,i.$el).on("click",function(t){t.stopImmediatePropagation(),e.info("arrow - event"),i._destroyPopups(t,i)}),this.$el.find(i.o.s.EXPORT).on("click",function(){a.publish(r.export)})},s.prototype._destroyPopups=function(e,i){var r=i;(0==t(r.o.s.popover_class,r.$el).has(e.target).length||t(e.target,r.$el).is(".close"))&&t(r.o.s.popover_class,r.$el).popover("destroy")},s.prototype._filterWhiteList=function(){for(var t=[],e=0,i=this.$dataForTreeGRid.data.length;e<i;e++)this.$whitelist[this.$dataForTreeGRid.data[e].bean]&&1==this.$whitelist[this.$dataForTreeGRid.data[e].bean]&&t.push(this.$dataForTreeGRid.data[e]);return t},s.prototype._checkExpandNodesOptions=function(){for(var e=[this.expandAttributesRecursively,this.expandAttributes],i=0;i<e.length;i++)if(e[i]&&e[i].length>0)for(var r=0;r<e[i].length;r++)0==i?this.$el.find(".treegrid-"+e[i][r],this.$el).treegrid("expandRecursive"):t(".treegrid-"+e[i][r],this.$el).treegrid("expand")},s.prototype._unbindListeners=function(){this.$el.find(this.o.s.description_class,this.$el).off(),this.$el.find(this.o.s.table_container+" tr > td",this.$el).off(),this.$el.find(this.o.s.treegrid_expander_arrow,this.$el).off(),this.$el.find(this.o.s.EXPORT).off(),this.$el.off()},s.prototype._getObjectKeys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},s}.apply(e,r),!(void 0!==n&&(t.exports=n))},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){var r;r=function(){"use strict";return{cache:!1,lang:"EN",environment:"develop",popover:{placement:"right",html:!0,trigger:"focus",animation:!0,title:'<span class="text-info"><strong>Description</strong></span><button type="button" data-toggle="popover" data-trigger="focus" class="close" >&times;</button>'},config:{initialState:"collapsed",indentTemplate:'<span class="treegrid-indent fx-indent"></span>',expanderTemplate:'<span class="treegrid-expander fx-expand"></span>',expanderExpandedClass:"treegrid-expander-expanded",expanderCollapsedClass:"treegrid-expander-collapsed"},whiteList:{},hideExportButton:!0,expandAttributes:[],expandAttributesRecursively:[]}}.call(e,i,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,i){var r;r=function(){"use strict";return{export:"export"}}.call(e,i,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,i){var r=i(8);t.exports=(r.default||r).template({1:function(t,e,i,r,n){return'                        <button data-role="export" type="button" class="fx-md-report-btn btn pull-right">Export Metadata</button>\r\n'},3:function(t,e,i,r,n){var a,o,s=null!=e?e:t.nullContext||{};return'                <tr class="'+t.escapeExpression((o=null!=(o=i.className||(null!=e?e.className:e))?o:i.helperMissing,"function"==typeof o?o.call(s,{name:"className",hash:{},data:n}):o))+'">\r\n'+(null!=(a=i.if.call(s,null!=e?e.desc:e,{name:"if",hash:{},fn:t.program(4,n,0),inverse:t.program(6,n,0),data:n}))?a:"")+"                </tr>\r\n"},4:function(t,e,i,r,n){var a,o,s=null!=e?e:t.nullContext||{},l=i.helperMissing,p="function",d=t.escapeExpression;return'                        <td class="metadata-viewer-title truncate">\r\n                            '+d((o=null!=(o=i.title||(null!=e?e.title:e))?o:l,typeof o===p?o.call(s,{name:"title",hash:{},data:n}):o))+'\r\n                            <div class="pull-right fx-md-viewer-description glyphicon glyphicon-info-sign"\r\n                                 data-content="'+(null!=(o=null!=(o=i.desc||(null!=e?e.desc:e))?o:l,a=typeof o===p?o.call(s,{name:"desc",hash:{},data:n}):o)?a:"")+'"></div>\r\n                        </td>\r\n                        <td class="metadata-viewer-value">'+d((o=null!=(o=i.value||(null!=e?e.value:e))?o:l,typeof o===p?o.call(s,{name:"value",hash:{},data:n}):o))+"</td>\r\n"},6:function(t,e,i,r,n){var a,o=null!=e?e:t.nullContext||{},s=i.helperMissing,l="function",p=t.escapeExpression;return'                        <td class="metadata-viewer-title truncate">'+p((a=null!=(a=i.title||(null!=e?e.title:e))?a:s,typeof a===l?a.call(o,{name:"title",hash:{},data:n}):a))+'</td>\r\n                        <td class="metadata-viewer-value">'+p((a=null!=(a=i.value||(null!=e?e.value:e))?a:s,typeof a===l?a.call(o,{name:"value",hash:{},data:n}):a))+"</td>\r\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,r,n){var a,o,s=null!=e?e:t.nullContext||{};return'<div class="fx-md-viewer-wrapper">\r\n    <div class="fx-md-viewer-header">\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <h4 class="fx-md-viewer-title ">'+(null!=(o=null!=(o=i.title_resource||(null!=e?e.title_resource:e))?o:i.helperMissing,a="function"==typeof o?o.call(s,{name:"title_resource",hash:{},data:n}):o)?a:"")+"\r\n"+(null!=(a=i.unless.call(s,null!=e?e.hideExportButton:e,{name:"unless",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n}))?a:"")+'                </h4>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="fx-md-viewer-body">\r\n        <table class="fx-md-viewer-container">\r\n'+(null!=(a=i.each.call(s,null!=e?e.data:e,{name:"each",hash:{},fn:t.program(3,n,0),inverse:t.noop,data:n}))?a:"")+'        </table>\r\n    </div>\r\n    <div class="fx-md-viewer-footer"></div>\r\n</div>'},useData:!0})},function(t,e,i){t.exports=i(9).default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(){var t=new s.HandlebarsEnvironment;return c.extend(t,s),t.SafeString=p.default,t.Exception=u.default,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=_,t.template=function(e){return _.template(e,t)},t}e.__esModule=!0;var o=i(10),s=n(o),l=i(24),p=r(l),d=i(12),u=r(d),h=i(11),c=n(h),f=i(25),_=n(f),v=i(26),m=r(v),T=a();T.create=a,m.default(T),T.default=T,e.default=T,t.exports=e.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,i){this.helpers=t||{},this.partials=e||{},this.decorators=i||{},l.registerDefaultHelpers(this),p.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=n;var a=i(11),o=i(12),s=r(o),l=i(13),p=i(21),d=i(23),u=r(d),h="4.1.0";e.VERSION=h;var c=7;e.COMPILER_REVISION=c;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=f;var _="[object Object]";n.prototype={constructor:n,logger:u.default,log:u.default.log,registerHelper:function(t,e){if(a.toString.call(t)===_){if(e)throw new s.default("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(a.toString.call(t)===_)a.extend(this.partials,t);else{if("undefined"==typeof e)throw new s.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(a.toString.call(t)===_){if(e)throw new s.default("Arg not supported with multiple decorators");a.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var v=u.default.log;e.log=v,e.createFrame=a.createFrame,e.logger=u.default},function(t,e){"use strict";function i(t){return d[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function n(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}function a(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return h.test(t)?t.replace(u,i):t}function o(t){return!t&&0!==t||!(!_(t)||0!==t.length)}function s(t){var e=r({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function p(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=r,e.indexOf=n,e.escapeExpression=a,e.isEmpty=o,e.createFrame=s,e.blockParams=l,e.appendContextPath=p;var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},u=/[&<>"'`=]/g,h=/[&<>"'`=]/,c=Object.prototype.toString;e.toString=c;var f=function(t){return"function"==typeof t};f(/x/)&&(e.isFunction=f=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)}),e.isFunction=f;var _=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===c.call(t)};e.isArray=_},function(t,e){"use strict";function i(t,e){var n=e&&e.loc,a=void 0,o=void 0;n&&(a=n.start.line,o=n.start.column,t+=" - "+a+":"+o);for(var s=Error.prototype.constructor.call(this,t),l=0;l<r.length;l++)this[r[l]]=s[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{n&&(this.lineNumber=a,Object.defineProperty?Object.defineProperty(this,"column",{value:o,enumerable:!0}):this.column=o)}catch(t){}}e.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,e.default=i,t.exports=e.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){o.default(t),l.default(t),d.default(t),h.default(t),f.default(t),v.default(t),T.default(t)}e.__esModule=!0,e.registerDefaultHelpers=n;var a=i(14),o=r(a),s=i(15),l=r(s),p=i(16),d=r(p),u=i(17),h=r(u),c=i(18),f=r(c),_=i(19),v=r(_),m=i(20),T=r(m)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(11);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse,a=i.fn;if(e===!0)return a(this);if(e===!1||null==e)return n(this);if(r.isArray(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):n(this);if(i.data&&i.ids){var o=r.createFrame(i.data);o.contextPath=r.appendContextPath(i.data.contextPath,i.name),i={data:o}}return a(e,i)})},t.exports=e.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(11),a=i(12),o=r(a);e.default=function(t){t.registerHelper("each",function(t,e){function i(e,i,a){p&&(p.key=e,p.index=i,p.first=0===i,p.last=!!a,d&&(p.contextPath=d+e)),l+=r(t[e],{data:p,blockParams:n.blockParams([t[e],e],[d+e,null])})}if(!e)throw new o.default("Must pass iterator to #each");var r=e.fn,a=e.inverse,s=0,l="",p=void 0,d=void 0;if(e.data&&e.ids&&(d=n.appendContextPath(e.data.contextPath,e.ids[0])+"."),n.isFunction(t)&&(t=t.call(this)),e.data&&(p=n.createFrame(e.data)),t&&"object"==typeof t)if(n.isArray(t))for(var u=t.length;s<u;s++)s in t&&i(s,s,s===t.length-1);else{var h=void 0;for(var c in t)t.hasOwnProperty(c)&&(void 0!==h&&i(h,s-1),h=c,s++);void 0!==h&&i(h,s-1,!0)}return 0===s&&(l=a(this)),l})},t.exports=e.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(12),a=r(n);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var r=i(11);e.default=function(t){t.registerHelper("if",function(t,e){return r.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers.if.call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],i=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var n=1;null!=i.hash.level?n=i.hash.level:i.data&&null!=i.data.level&&(n=i.data.level),e[0]=n,t.log.apply(t,e)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var r=i(11);e.default=function(t){t.registerHelper("with",function(t,e){r.isFunction(t)&&(t=t.call(this));var i=e.fn;if(r.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&(n=r.createFrame(e.data),n.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),i(t,{data:n,blockParams:r.blockParams([t],[n&&n.contextPath])})})},t.exports=e.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){o.default(t)}e.__esModule=!0,e.registerDefaultDecorators=n;var a=i(22),o=r(a)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(11);e.default=function(t){t.registerDecorator("inline",function(t,e,i,n){var a=t;return e.partials||(e.partials={},a=function(n,a){var o=i.partials;i.partials=r.extend({},o,e.partials);var s=t(n,a);return i.partials=o,s}),e.partials[n.args[0]]=n.fn,a})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var r=i(11),n={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=r.indexOf(n.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=n.lookupLevel(t),"undefined"!=typeof console&&n.lookupLevel(n.level)<=t){var e=n.methodMap[t];console[e]||(e="log");for(var i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];console[e].apply(console,r)}}};e.default=n,t.exports=e.default},function(t,e){"use strict";function i(t){this.string=t}e.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},e.default=i,t.exports=e.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t){var e=t&&t[0]||1,i=m.COMPILER_REVISION;if(e!==i){if(e<i){var r=m.REVISION_CHANGES[i],n=m.REVISION_CHANGES[e];throw new v.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+n+").")}throw new v.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){function i(i,r,n){n.hash&&(r=f.extend({},r,n.hash),n.ids&&(n.ids[0]=!0)),i=e.VM.resolvePartial.call(this,i,r,n);var a=e.VM.invokePartial.call(this,i,r,n);if(null==a&&e.compile&&(n.partials[n.name]=e.compile(i,t.compilerOptions,e),a=n.partials[n.name](r,n)),null!=a){if(n.indent){for(var o=a.split("\n"),s=0,l=o.length;s<l&&(o[s]||s+1!==l);s++)o[s]=n.indent+o[s];a=o.join("\n")}return a}throw new v.default("The partial "+n.name+" could not be compiled when running in runtime-only mode")}function r(e){function i(e){return""+t.main(n,e,n.helpers,n.partials,o,l,s)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=a.data;r._setup(a),!a.partial&&t.useData&&(o=u(e,o));var s=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(s=a.depths?e!=a.depths[0]?[e].concat(a.depths):a.depths:[e]),(i=h(t.main,i,n,a.depths||[],o,l))(e,a)}if(!e)throw new v.default("No environment passed to template");if(!t||!t.main)throw new v.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var n={strict:function(t,e){if(!(e in t))throw new v.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var i=t.length,r=0;r<i;r++)if(t[r]&&null!=t[r][e])return t[r][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:i,fn:function(e){var i=t[e];return i.decorator=t[e+"_d"],i},programs:[],program:function(t,e,i,r,n){var a=this.programs[t],o=this.fn(t);return e||n||r||i?a=s(this,t,o,e,i,r,n):a||(a=this.programs[t]=s(this,t,o)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=f.extend({},e,t)),i},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials,n.decorators=i.decorators):(n.helpers=n.merge(i.helpers,e.helpers),t.usePartial&&(n.partials=n.merge(i.partials,e.partials)),(t.usePartial||t.useDecorators)&&(n.decorators=n.merge(i.decorators,e.decorators)))},r._child=function(e,i,r,a){if(t.useBlockParams&&!r)throw new v.default("must pass block params");if(t.useDepths&&!a)throw new v.default("must pass parent depths");return s(n,e,t[e],i,0,r,a)},r}function s(t,e,i,r,n,a,o){function s(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||e==o[0]||e===t.nullContext&&null===o[0]||(s=[e].concat(o)),i(t,e,t.helpers,t.partials,n.data||r,a&&[n.blockParams].concat(a),s)}return s=h(i,s,t,o,r,a),s.program=e,s.depth=o?o.length:0,s.blockParams=n||0,s}function l(t,e,i){return t?t.call||i.name||(i.name=t,t=i.partials[t]):t="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],t}function p(t,e,i){var r=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var n=void 0;if(i.fn&&i.fn!==d&&!function(){i.data=m.createFrame(i.data);var t=i.fn;n=i.data["partial-block"]=function(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i.data=m.createFrame(i.data),i.data["partial-block"]=r,t(e,i)},t.partials&&(i.partials=f.extend({},i.partials,t.partials))}(),void 0===t&&n&&(t=n),void 0===t)throw new v.default("The partial "+i.name+" could not be found");if(t instanceof Function)return t(e,i)}function d(){return""}function u(t,e){return e&&"root"in e||(e=e?m.createFrame(e):{},e.root=t),e}function h(t,e,i,r,n,a){if(t.decorator){var o={};e=t.decorator(e,o,i,r&&r[0],n,a,r),f.extend(e,o)}return e}e.__esModule=!0,e.checkRevision=a,e.template=o,e.wrapProgram=s,e.resolvePartial=l,e.invokePartial=p,e.noop=d;var c=i(11),f=n(c),_=i(12),v=r(_),m=i(10)},function(t,e){(function(i){"use strict";e.__esModule=!0,e.default=function(t){var e="undefined"!=typeof i?i:window,r=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=r),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){t.exports=i},function(t,e){t.exports=r},function(t,e,i){var r;r=function(){"use strict";return{missingContainer:"missing_container",missingModel:"missing_model",getMDSDError:"impossible to load mdsd"}}.call(e,i,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,i){var r,n;r=[i(3),i(4),i(31),i(32)],n=function(t,e,i,r){"use strict";function n(e){return this.o=t.extend(!0,{},this.o,a,e),this}var a={viewerOptions:{isFenixMetadata:!0},defaultOptions:{LANG:"fr",DEFAULT_LANG:"en",TITLE_ATTRIBUTE:"title",DESCRIPTION_ATTRIBUTE:"description",NOVALUE_OBJECT:{noValue:!0},HARMONIZE_TITLE:!0},metadataOptions:{PROPERTIES_ATTR:"properties",TYPE_ATTRIBUTE:"type",SORTABLE_ATTRIBUTE:"propertyOrder",STRING_TYPE:"string",NUMBER_TYPE:"number",BOOLEAN_TYPE:"boolean",OBJECT_TYPE:"object",ARRAY_TYPE:"array",REF_TYPE:"$ref",PATTERN_PROPERTIES:"patternProperties",SYMBOL_PATTERN_PROPERTIES:".{1,}",TITLE_I18N:"title_i18n",TITLE_DEFAULT:"title",DESC_I18N:"description_i18n",DESC_DEFAULT:"description",ITEMS_PROPERTIES:"items",SUBSTR_ROOT_DEFINITIONS:14,CODES:"codes",HAS_CHILDREN:"hasChildren",BEAN:"bean",DATE_FORMAT:"format"}};return n.prototype.process=function(t){return this.$mdsd=t,this._initInternModelData(),this._startInternModelData(),this._getInternModelData()},n.prototype._getInternModelData=function(){return{title:this.$title,model:this.$internDataModel}},n.prototype._initInternModelData=function(){this.$definitions=this.$mdsd.definitions,this.$properties=this.$mdsd.properties,this.$lang=this.o.lang.toLowerCase(),this.$title=this._getTitleFromData(),this.$specialFields=this.o.specialFields||i},n.prototype._startInternModelData=function(){var t=this.o.data,e=this.$properties;this.$internDataModel=this._prepareInternModelData(t,e,0)},n.prototype._isASpecialAttribute=function(t){return"undefined"!=typeof this.$specialFields[t]},n.prototype._prepareInternModelData=function(t,e,i){for(var r=[],n=this._sortMetadataByPropertyOrder(e),a=0,o=n.length;a<o;a++){var s=n[a][0];if(this.o.viewerOptions.isFenixMetadata&&this._isASpecialAttribute(s)&&t[s]&&""!=t[s]&&t[s].codes&&t[s].codes.length>0)r.push(this._handleFenixCodes(t,e,s));else if(t[s]&&""!=t[s])if(this._isCaseBase(e[s]))r.push(this._addBaseModel(e[s],t[s],s));else if(this._isObjectAttribute(e[s])){if(this._existsPropertiesAttribute(e[s])){var l={};l=this._addRecursiveModel(e[s],s),l.value=this._prepareInternModelData(t[s],e[s][this.o.metadataOptions.PROPERTIES_ATTR],i+1),r.push(l)}else if(this._existsPatternProperties(e[s])&&this._existsPatternPropertiesValue(t[s])){var l={};l=this._addPatternModel(e[s],t[s],s),r.push(l)}else if(this._existsAReference(e[s])){var l={};l=this._addRecursiveModel(e[s],s);var p=this._getAttributeFromReference(e[s]);l.value=this._prepareInternModelData(t[s],this.$definitions[p][this.o.metadataOptions.PROPERTIES_ATTR],i+1),r.push(l)}}else if(this._isAnArrayAttribute(e[s])){var l={};if(l=this._addArrayModel(e[s],s),this._isASimpleArrayItem(e[s]))this._fillNoChildrenAttribute(l),l.value=t[s],r.push(l);else if(this._isARefArrayItem(e[s])){this._fillChildrenAttribute(l),l.value=[];for(var p=this._getAttributeFromReference(e[s][this.o.metadataOptions.ITEMS_PROPERTIES]),d=0,u=t[s].length;d<u;d++)l.value=l.value.concat(this._prepareInternModelData(t[s][d],this.$definitions[p][this.o.metadataOptions.PROPERTIES_ATTR],i+1));r.push(l)}}}return i--,i==-1&&(this.$internDataModel=r),r},n.prototype._sortMetadataByPropertyOrder=function(t){var e=[];for(var i in t)e.push([i,t[i][this.o.metadataOptions.SORTABLE_ATTRIBUTE]]);return e.sort(function(t,e){return t[1]-e[1]}),e},n.prototype._existsPatternPropertiesValue=function(t){return!(!t[this.$lang.toUpperCase()]||""===t[this.$lang.toUpperCase()])||!(!t[this.o.defaultOptions.DEFAULT_LANG.toUpperCase()]||""===t[this.o.defaultOptions.DEFAULT_LANG.toUpperCase()])},n.prototype._existsPropertiesAttribute=function(t){return t.hasOwnProperty(this.o.metadataOptions.PROPERTIES_ATTR)&&this._getObjectKeys(t[this.o.metadataOptions.PROPERTIES_ATTR]).length>0},n.prototype._existsPatternProperties=function(t){return t.hasOwnProperty(this.o.metadataOptions.PATTERN_PROPERTIES)&&this._getObjectKeys(t[this.o.metadataOptions.PATTERN_PROPERTIES]).length>0},n.prototype._existsAReference=function(t){return t.hasOwnProperty(this.o.metadataOptions.REF_TYPE)&&this._getObjectKeys(t[this.o.metadataOptions.REF_TYPE]).length>0},n.prototype._isObjectAttribute=function(t){return t.hasOwnProperty(this.o.metadataOptions.TYPE_ATTRIBUTE)&&t[this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.OBJECT_TYPE},n.prototype._isAnArrayAttribute=function(t){return t.hasOwnProperty(this.o.metadataOptions.TYPE_ATTRIBUTE)&&t[this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.ARRAY_TYPE},n.prototype._getTitleFromData=function(){var t="";return"object"==typeof this.o.data[this.o.defaultOptions.TITLE_ATTRIBUTE]&&(t=this.o.data[this.o.defaultOptions.TITLE_ATTRIBUTE][this.$lang.toUpperCase()]?this.o.data[this.o.defaultOptions.TITLE_ATTRIBUTE][this.$lang.toUpperCase()]:this.o.data[this.o.defaultOptions.TITLE_ATTRIBUTE][this.o.defaultOptions.DEFAULT_LANG.toUpperCase()]),delete this.o.data[this.o.defaultOptions.TITLE_ATTRIBUTE],delete this.$properties[this.o.defaultOptions.TITLE_ATTRIBUTE],t},n.prototype._addRecursiveModel=function(t,e){var i={};return this._fillTitle(t,e,i),this._fillDescription(t,e,i),this._fillAttributeBean(e,i),this._fillChildrenAttribute(i),i},n.prototype._addArrayModel=function(t,e){var i={};return this._fillTitle(t,e,i),this._fillDescription(t,e,i),this._fillAttributeBean(e,i),i},n.prototype._addBaseModel=function(t,e,i){var n={};this._fillTitle(t,i,n),this._fillDescription(t,i,n),this._fillAttributeBean(i,n),this._fillNoChildrenAttribute(n);var a=t[this.o.metadataOptions.DATE_FORMAT]&&"date"==t[this.o.metadataOptions.DATE_FORMAT]?r(new Date(e)).format("DD/MM/YYYY"):e;return n.value=a,n},n.prototype._addPatternModel=function(t,e,i){var r={};return this._fillTitle(t,i,r),this._fillDescription(t,i,r),this._fillAttributeBean(i,r),this._fillNoChildrenAttribute(r),r.value=e[this.$lang.toUpperCase()]?e[this.$lang.toUpperCase()]:e[this.o.defaultOptions.DEFAULT_LANG.toUpperCase()],r},n.prototype._fillTitle=function(t,e,i){t[this.o.metadataOptions.TITLE_I18N]&&t[this.o.metadataOptions.TITLE_I18N][this.$lang]&&""!=t[this.o.metadataOptions.TITLE_I18N][this.$lang]?i[this.o.defaultOptions.TITLE_ATTRIBUTE]=t[this.o.metadataOptions.TITLE_I18N][this.$lang].charAt(0).toUpperCase()+t[this.o.metadataOptions.TITLE_I18N][this.$lang].substr(1).toLowerCase():t[this.o.metadataOptions.TITLE_DEFAULT]?i[this.o.defaultOptions.TITLE_ATTRIBUTE]=t[this.o.metadataOptions.TITLE_DEFAULT].charAt(0).toUpperCase()+t[this.o.metadataOptions.TITLE_DEFAULT].substr(1).toLowerCase():i[this.o.defaultOptions.TITLE_ATTRIBUTE]=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();
},n.prototype._fillDescription=function(t,e,i){t[this.o.metadataOptions.DESC_I18N]&&t[this.o.metadataOptions.DESC_I18N][this.$lang]&&""!=t[this.o.metadataOptions.DESC_I18N][this.$lang]?i[this.o.defaultOptions.DESCRIPTION_ATTRIBUTE]=t[this.o.metadataOptions.DESC_I18N][this.$lang]:t[this.o.metadataOptions.DESC_DEFAULT]?i[this.o.defaultOptions.DESCRIPTION_ATTRIBUTE]=t[this.o.metadataOptions.DESC_DEFAULT]:i[this.o.defaultOptions.DESCRIPTION_ATTRIBUTE]=""},n.prototype._isCaseBase=function(t){return t.hasOwnProperty("type")&&(t[this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.STRING_TYPE||t[this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.NUMBER_TYPE||t[this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.BOOLEAN_TYPE)},n.prototype._isASimpleArrayItem=function(t){return t.hasOwnProperty(this.o.metadataOptions.ITEMS_PROPERTIES)&&(t[this.o.metadataOptions.ITEMS_PROPERTIES][this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.STRING_TYPE||t[this.o.metadataOptions.ITEMS_PROPERTIES][this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.NUMBER_TYPE||t[this.o.metadataOptions.ITEMS_PROPERTIES][this.o.metadataOptions.TYPE_ATTRIBUTE]===this.o.metadataOptions.BOOLEAN_TYPE)},n.prototype._isARefArrayItem=function(t){return t.hasOwnProperty(this.o.metadataOptions.ITEMS_PROPERTIES)&&t[this.o.metadataOptions.ITEMS_PROPERTIES][this.o.metadataOptions.REF_TYPE]&&this._getObjectKeys(t[this.o.metadataOptions.ITEMS_PROPERTIES][this.o.metadataOptions.REF_TYPE]).length>0},n.prototype._isASpecialAttribute=function(t){return"undefined"!=typeof this.$specialFields[t]},n.prototype._handleFenixCodes=function(t,e,i){var r={};this._fillTitle(e[i],i,r),this._fillDescription(e[i],i,r),this._fillAttributeBean(i,r),this._fillNoChildrenAttribute(r);var n=t[i].codes;r.value=[];for(var a=0,o=n.length;a<o;a++)if(n[a].label){var s="undefined"!=typeof n[a].label[this.$lang]?n[a].label[this.$lang]:n[a].label[this.o.defaultOptions.DEFAULT_LANG.toUpperCase()];r.value.push(s)}else r.value.push("");return r},n.prototype._fillAttributeBean=function(t,e){e[this.o.metadataOptions.BEAN]=t},n.prototype._fillChildrenAttribute=function(t){t[this.o.metadataOptions.HAS_CHILDREN]=!0},n.prototype._fillNoChildrenAttribute=function(t){t[this.o.metadataOptions.HAS_CHILDREN]=!1},n.prototype._getAttributeFromReference=function(t){return t[this.o.metadataOptions.REF_TYPE].substr(this.o.metadataOptions.SUBSTR_ROOT_DEFINITIONS)},n.prototype._getObjectKeys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},n}.apply(e,r),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports={metadataLanguage:!0,language:!0,characterSet:!0,disseminationPeriodicity:!0,confidentialityStatus:!0,referencePeriod:!0,referenceArea:!0,coverageSectors:!0,coverageGeographic:!0,updatePeriodicity:!0,projection:!0,ellipsoid:!0,datum:!0,typeOfProduct:!0,processing:!0,topologyLevel:!0,typeOfCollection:!0,collectionPeriodicity:!0,originOfCollectedData:!0,dataAdjustment:!0}},function(t,e){t.exports=n},function(t,e){t.exports=a},function(t,e){}])});
//# sourceMappingURL=fenix-ui-metadata-viewer.min.js.map